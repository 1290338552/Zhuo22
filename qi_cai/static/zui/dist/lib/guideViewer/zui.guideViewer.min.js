/*!
 * ZUI: 步骤查看组件 - v1.9.1 - 2019-06-03
 * http://zui.sexy
 * GitHub: https://github.com/easysoft/zui.git 
 * Copyright (c) 2019 cnezsoft.com; Licensed MIT
 */
!function(e){"use strict";var t="zui.guideViewer",i=function(a,n){var d=this;d.name=t,d.$=e(a),n=d.options=e.extend({},i.DEFAULTS,this.$.data(),n);var l=this.lang=n.langs[n.lang]||n.langs[Boards.DEFAULTS.lang],s=d.groupName=n.name||n.guideViewer,r=e('[data-guide-viewer="'+s+'"],[data-guide-viewer][data-name="'+s+'"]').not(".guide-viewer-inited");if(r.length){var o=d.id=n.id||e.zui.uuid(),g=e(n.template||'<div class="guide-viewer panel"><div class="carousel"><div class="carousel-inner"></div></div><div class="guide-viewer-navs panel-footer" style="display: table; width: 100%; padding: 3px;"><a class="guide-viewer-nav prev disabled" data-slide="prev" style="width: 80px">'+(n.prevStepIcon?'<i class="icon '+n.prevStepIcon+'" style="opacity: .5"></i> ':"")+l.prevStep+'</a><div class="guide-viewer-title text-center"><div class="text"></div></div><a class="guide-viewer-nav next text-right" data-slide="next" style="width: 80px">'+l.nextStep+(n.nextStepIcon?'<i class="icon '+n.nextStepIcon+'" style="opacity: .5"></i> ':"")+"</a></div></div>"),v=g.find(".carousel").attr("id","carousel-"+o).toggleClass("slide",!!n.slide).css({margin:0}),c=g.find(".carousel-inner");g.find(".guide-viewer-nav").attr("href","#carousel-"+o);var u=g.find(".guide-viewer-navs");"top"===n.navPos&&u.insertBefore(v).removeClass("panel-footer").addClass("panel-heading");var p=u.children().css({display:"table-cell",padding:"3px 8px",verticalAlign:"middle"}),h=p.filter(".guide-viewer-title").find(".text"),f=p.filter(".guide-viewer-nav.prev"),x=p.filter(".guide-viewer-nav.next");v.on("slide.zui.carousel",function(t){var i=e(t.relatedTarget),a=i.data("title")||"";h.text(a),f.toggleClass("disabled",!i.prev().length),x.toggleClass("disabled",!i.next().length)}).carousel(e.extend({wrap:!1,interval:!1},"string"==typeof n.carousel?e.parseJSON(n.carousel):n.carousel));var w="number"==typeof n.height,S=n.lightbox&&e.fn.lightbox;r.each(function(t){var i=e(this),a=e('<div class="item"></div>'),d=e.extend({title:i.attr("alt")||i.attr("title")},i.data());t||(a.addClass("active"),h.text(d.title));var l=i.clone().attr("data-guide-viewer",null).removeClass("hidden");w&&a.css({height:n.height,overflowY:"auto"}),l.is("img")&&(a.addClass("is-img"),l.css({margin:"0 auto",border:"none"}),w&&(a.css({lineHeight:n.height+"px",textAlign:"center"}),l.css({display:"inline-block",width:"auto",minWidth:0})),S&&l.attr({"data-toggle":"lightbox","data-caption":d.title,"data-group":"lightbox-for-guide-viewer-"+s,"data-height":null})),a.data(d).append(l).appendTo(c),i.hide().addClass("guide-viewer-inited")}),S&&g.find('[data-toggle="lightbox"]').lightbox(),g.insertAfter(d.$),n.defaultPos&&v.data("zui.carousel").to(n.defaultPos)}};i.DEFAULTS={lang:e.zui.clientLang(),lightbox:!1,prevStepIcon:"icon-chevron-left",nextStepIcon:"icon-chevron-right",navPos:"bottom",height:"auto",langs:{zh_cn:{prevStep:"上一步",nextStep:"下一步"},zh_tw:{prevStep:"上一步",nextStep:"下一步"},en:{prevStep:"Prev Step",nextStep:"Next Step"}}},e.fn.guideViewer=function(a){return this.each(function(){var n=e(this),d=n.data(t);if(!(n.hasClass("guide-viewer-inited")||d&&d[t])){var l="object"==typeof a&&a;d||n.data(t,d=new i(this,l)),"string"==typeof a&&d[a]()}})},i.NAME=t,e.fn.guideViewer.Constructor=i,e(function(){e("[data-guide-viewer]").guideViewer()})}(jQuery);